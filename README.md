# REA Toy Robot simular

A command line application built with nodejs. The application input is defined in an input file. Details about how to use input file can be found in run in development and run in production section.

## Environment

Node 10

## Installing

In project root directory, install all node modules

```bash
[project_root_directory]$ npm i
```

## Development mode

In project root directory, run:

```bash
[project_root_directory]$ npm start
```

The command will compile source code to a bundle file with `webpack` and run the app with `input.txt` as input file which can be found in project root directory.

## Production (independent command in terminal)

### build & deploy
The application can be built and deployed as an independent command in terminal `(node 10)`, run

```bash
[project_root_directory]$ npm run production
```

### run
After run above command, following command will be available in your ternimal:

```bash
$ toy-robot-simulator [absolute_input_file_path]
```

For example, in project root directory, you run with `input.txt`:

```bash
$ toy-robot-simulator ./input.txt
```

### uninstall

To uninstall the command from your terminal, run:

```bash
[project_root_directory]$ npm run uninstallApp
```

## Input file format

Input file content is an array which keeps commands in sequence:

```bash
["PLACE 0,0,NORTH","MOVE","REPORT"]
```

Then command sequence will be

```bash
PLACE 0,0,NORTH
MOVE
REPORT
```

Output

```bash
0,1,NORTH
```

Feel free to modify `[project_root_directory]/input.txt` and run `npm start` to test the application in development mode.

## Testing

### Unit Testing

In project root directory, run

```bash
[project_root_directory]$ npm run test
```

### Test Coverage Report

Test coverage report can be generated by istanbul, run

```bash
[project_root_directory]$ npm run test:coverage
```

After run above command, test coverage report can be found by open following file in a browser:

```bash
[project_root]/coverage/lcov-report/src/index.html
```

Test coverage report in commandline:

```bash
=============================== Coverage summary ===============================
Statements   : 97.83% ( 135/138 )
Branches     : 96% ( 72/75 )
Functions    : 100% ( 14/14 )
Lines        : 97.76% ( 131/134 )
================================================================================
```

### End to end tests

End to end testing will run against development enviornment. Run

```bash
[project_root_directory]$ npm run test:e2e
```

`testData.e2e.json` defines many test command sequences with their corresponding expected output. End to end testing will read this file, for each test case, it will override command sequence to `input.txt`, run against `npm start`, and check against with expected output defined in `testData.e2e.json`.

## Built With

* [Webpack](https://webpack.js.org/) - Bundle source code
* [Mocha](https://mochajs.org/) - Test framework
* [Sinon](https://sinonjs.org/) - Used to stub mock in testing
* [Chai](http://www.chaijs.com/) - BDD/TDD assert library
* [istanbul](https://github.com/istanbuljs) - Code coverage report tool

## Acknowledgments

* All copy rights reserved
