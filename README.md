# REA toy robot simulator


A command line application built with nodejs. The application input is defined in an input file. Details about how to use input file can be found in `Input file format` section.


## Environment


Node 10


## Installing


In project root directory, install all node modules


```bash
[project_root_directory]$ npm i
```

## Development mode


In project root directory, run:


```bash
[project_root_directory]$ npm start
```


The command will compile source code to a bundle file with `webpack` and run the app with `input.txt` as input file which can be found in project root directory.


## Production (independent command in terminal)

### build & deploy
The application can be built and deployed as an independent command in terminal `(node 10)`, run

```bash
[project_root_directory]$ npm run production
```

### run
After run above command, following command will be available in your ternimal:

```bash
$ toy-robot-simulator [absolute_input_file_path]
```

For example, in project root directory, you can run it with `input.txt`:

```bash
$ toy-robot-simulator ./input.txt
```

### uninstall


To uninstall the command from your terminal, run:


```bash
[project_root_directory]$ npm run uninstallApp
```


## Input file format


Input file content is an array which keeps commands in sequence:


```bash
["PLACE 0,0,NORTH","MOVE","REPORT"]
```

Then command sequence will be


```bash
PLACE 0,0,NORTH
MOVE
REPORT
```

Output

```bash
0,1,NORTH
```

Feel free to modify `[project_root_directory]/input.txt` and run `npm start` to test the application in development mode.


## Testing

### tdd/bdd

In project root directory, run

```bash
[project_root_directory]$ npm run test
```

### test coverage report

Test coverage report can be generated by istanbul, run

```bash
[project_root_directory]$ npm run test:coverage
```

After run above command, test coverage report will be visible by opening following file in a browser:

```bash
[project_root]/coverage/lcov-report/src/index.html
```

Test coverage report in commandline:


```bash
=============================== Coverage summary ===============================
Statements   : 97.83% ( 135/138 )
Branches     : 96% ( 72/75 )
Functions    : 100% ( 14/14 )
Lines        : 97.76% ( 131/134 )
================================================================================
```


### test data


Test data is defined in `testData.e2e.json`. 


It defines many test command sequences with their corresponding expected output.


```json
[
  {
    "commandSequence": ["PLACE 0,0,NORTH","MOVE","REPORT"],
    "expected": "0,1,NORTH"
  },
  {
    "commandSequence": ["PLACE 0,0,NORTH","MOVE","MOVE","MOVE","MOVE","MOVE","MOVE","REPORT"],
    "expected": "0,4,NORTH"
  }
]
```


### end to end tests


End to end testing will run against development enviornment. Run

```bash
[project_root_directory]$ npm run test:e2e
```

End to end testing will read `testData.e2e.json`, for each test case, it will the command sequence to `input.txt`, run `npm start`, and check each console output against expected output defined in `testData.e2e.json`.



## Built With

* [Webpack](https://webpack.js.org/) - Bundle source code
* [Mocha](https://mochajs.org/) - Test framework
* [Sinon](https://sinonjs.org/) - Used to stub mock in testing
* [Chai](http://www.chaijs.com/) - BDD/TDD assert library
* [istanbul](https://github.com/istanbuljs) - Code coverage report tool


## Acknowledgments

* All copy rights reserved

